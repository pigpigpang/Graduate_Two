## 作业7

**软件1801 肖云杰 201826010113**

总共做到b级任务，这里分层次介绍各级任务

---

### D级

>  查找记录DAC-0832的一些基本功能管脚表如下

|     功能      | 管脚 |   功能    | 管脚 |
| :-----------: | :--: | :-------: | :--: |
| 时钟信号(clk) |  28  |           |      |
|   输出---D0   | 205  | 输出---D1 | 206  |
|   输出---D2   | 207  | 输出---D3 | 208  |
|   输出---D4   | 213  | 输出---D5 | 214  |
|   输出---D6   | 215  | 输出---D7 | 216  |
|   输入---A0   | 116  | 输入---A1 | 115  |
|   输入---A2   | 114  | 输入---A3 | 113  |
|   输入---A4   | 108  | 输入---A5 | 107  |
|   输入---A6   | 106  | 输入---A7 | 105  |

---

### C级

>  VHDL编写DAC0832的测量电路，并实物硬件验证

编写测量验证vhdl文件

> 输入input信号，分配管脚，输出管脚分配，下载，测量如下

|  输入值  |  输出值  | 挡位 |
| :------: | :------: | ---- |
| 00000000 | 0.003/mV | 0    |
| 00000001 | 16.9/mV  | 1    |
| 00000011 | 58.3/mV  | 3    |
| 00000111 | 136.9/mV | 7    |
| 00001111 | 296.8/mV | 15   |
| 00011111 |  0.62/V  | 31   |
| 00111111 | 1.262/V  | 63   |
| 01111111 | 2.546/V  | 127  |
| 11111111 |  5.10/V  | 255  |

根据挡位和输出值，线性规划，得到 挡位-输出值 趋势线如下   *y = 20.017x - 1.2345  (mV)*

---

### B级任务

> - 输入挡位显示
> - 输出电压的理论值  与 测量值产生差距的原因

---

#### 思路

我们在C级任务上做一些拓展，从C级任务的线性规划式子，简化得到如下函数 **y = 0.02x (V)**，输入是一个八位二进制，那么我们需要把八位二进制转化为十进制，同时再根据十进制的段选信号和位选信号输出在数码管上

---

##### 分块设计

模八计数器     数码管位选选择     十进制转化模块

----

**顶层设计以及管脚分配**

![1572680542090](C:\Users\pigpigpang\AppData\Roaming\Typora\typora-user-images\1572680542090.png)

---

**函数转换方法**

> 运用库函数conv_integer，将输入的二进制向量转化为一个十进制的数，再进行**逐位取余递归**，分别将各位数记录，将每位数的段选信号转化出来，输出段选信号。

---

| 挡位 | 理论电压 | 实际电压 |
| ---- | -------- | -------- |
| 0    | 0        | 0.000003 |
| 1    | 0.02     | 0.0169   |
| 3    | 0.06     | 0.0583   |
| 7    | 0.14     | 0.1369   |
| 15   | 0.30     | 0.2968   |
| 31   | 0.62     | 0.62     |
| 63   | 1.26     | 1.262    |
| 128  | 2.54     | 2.546    |
| 255  | 5.10     | 5.10     |

---

**分析**

理论电压在挡位较低时，用线性规划模拟出来的值，与实际电压比，由较大差距，分析是挡位较低时，测量电压的电压表内部会有误差，同时，两个表笔和测量接口的接触也可能会有影响

---

## 总结

**主要特色**

- 采用了库函数进行 **vector** 和 **integer** 的相互转化，减少了代码量
- 各级任务相互递进，分模块设计，最后综合

**可拓展**

- 只需要加位，加相应变量的范围，就可以在数码管上输出其他各种情况

**人文**

- 部分没学习过的知识，合理利用百度和google搜索，丰富自己的知识，会减少很多任务
- 分模块设计，分模块去检测，主设计会更简单，更容易看，不会杂乱无章
- 遇到自己不会的问题，积极解决，向同学寻求解决思路，自己解决，有成就感